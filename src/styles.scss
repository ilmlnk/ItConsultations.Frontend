@use '@angular/material' as mat;
@import "../node_modules/bootstrap/scss/bootstrap";
@import "../node_modules/ngx-bootstrap/datepicker/bs-datepicker";
@import "@angular/material/prebuilt-themes/indigo-pink.css";
@import "primeicons/primeicons.css";


@include mat.core();

* {
    font-family: "Open Sans", sans-serif;
}

:root {
    // glass background colors
    --glass-bg-primary: rgba(240, 245, 250, 0.4);
    --glass-bg-secondary: rgba(255, 255, 255, 0.3);
    --glass-bg-hover: rgba(255, 255, 255, 0.5);

    // glass borders
    --glass-border: 1px solid rgba(255, 255, 255, 0.2);
    --glass-border-hover: 1px solid rgba(255, 255, 255, 0.4);

    // glass blur
    --glass-blur: blur(18px);
    --glass-shadow: 0 0 20px rgba(0, 0, 0, 0.06);
    --glass-shadow-hover: 0 0 24px rgba(0, 0, 0, 0.12);
    --glass-border-radius: 20px;
    --glass-border-radius-small: 12px;

    // *** SIDEBAR VARIABLES ***
    // sidebar dimensions
    --sidebar-width: 70px;
    --sidebar-position-left: 30px;
    --sidebar-padding: 0.5rem 0;
    --sidebar-item-spacing: 0.75rem 0;

    // sidebar colors
    --sidebar-bg: var(--glass-bg-primary);
    --sidebar-border: var(--glass-border);
    --sidebar-shadow: var(--glass-shadow);

    // matmenu colors
    --sidebar-mat-menu-bg: var(--glass-bg-primary);
    --sidebar-mat-menu-border: var(--glass-border);
    --sidebar-mat-menu-shadow: var(--glass-shadow);

    // sidebar hover colors
    --sidebar-mat-menu-option-hover-bg: var(--glass-bg-hover);
    --sidebar-mat-menu-option-hover-font-weight: 600;

    // *** CONSULTATION CARD STYLES ***
    --consultation-card-bg: rgba(230, 238, 250, 0.55);
    --consultation-card-border: rgba(243, 246, 250, 0.4);
    --consultation-card-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
    --consultation-card-hover-shadow: 0 16px 48px rgba(0, 0, 0, 0.18);
    --consultation-card-backdrop-blur: blur(20px);

    // Text colors
    --consultation-card-title-color: #1a1a1a;
    --consultation-card-subtitle-color: #666666;
    --consultation-card-text-color: #333333;
    --consultation-card-price-color: #2e7d32;

    // Button colors
    --consultation-card-button-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --consultation-card-button-hover-bg: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
    --consultation-card-button-text: white;

    // *** ICON AND TEXT COLORS ***
    // default states
    --icon-color-default: rgb(114, 114, 114);
    --icon-color-hover: white;
    --icon-color-active: rgb(34, 151, 219);

    // text colors
    --text-color-primary: #333333;
    --text-color-secondary: rgb(114, 114, 114);
    --text-color-muted: #999999;
    --text-color-light: white;

    --mdc-menu-container-color: rgba(183, 215, 247, 0.5);
    --mdc-menu-container-shape: 12px;
    --mdc-menu-container-elevation: 0 0 clamp(10px, 2vw, 20px) rgba(0, 0, 0, 0.06);

    // dark mode colors
    --mdc-menu-container-color-dark: rgba(255, 255, 255, 0.5);
    --mdc-menu-container-shape-dark: 12px;
    --mdc-menu-container-elevation-dark: 0 0 clamp(10px, 2vw, 20px) rgba(0, 0, 0, 0.06);

    // *** SIZING VARIABLES ***
    // icon sizes
    --icon-size-small: 20px;
    --icon-size-medium: 28px;
    --icon-size-large: 32px;

    // button sizes
    --button-size-small: 40px;
    --button-size-medium: 48px;
    --button-size-large: 56px;

    // Spacing
    --spacing-xs: 0.25rem;
    --spacing-sm: 0.5rem;
    --spacing-md: 0.75rem;
    --spacing-lg: 1rem;
    --spacing-xl: 1.5rem;

    // *** RESPONSIVE BREAKPOINTS ***
    --breakpoint-mobile: 768px;
    --breakpoint-tablet: 1024px;
    --breakpoint-desktop: 1200px;

    --body-bg: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    --text-color-base: #333333;
    --text-color-muted: #666666;
    --text-color-inverted: #ffffff;
    --primary-color: #667eea;
    --primary-color-rgb: 102, 126, 234;

    --glass-bg-primary: rgba(255, 255, 255, 0.4);
    --glass-bg-secondary: rgba(255, 255, 255, 0.6);
    --glass-bg-hover: rgba(255, 255, 255, 0.7);
    --glass-border: 1px solid rgba(255, 255, 255, 0.5);
    --glass-border-hover: 1px solid rgba(255, 255, 255, 0.8);
    --glass-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
    --glass-shadow-hover: 0 6px 20px rgba(0, 0, 0, 0.12);
    --glass-blur: 10px;
    --glass-border-radius: 16px;

    --button-text-color: #333;
    --button-text-color-on-primary: #ffffff;

    --card-bg: var(--glass-bg-primary);
    --card-border: var(--glass-border);
    --card-shadow: var(--glass-shadow);
    --card-text-color: var(--text-color-base);
    --card-subtitle-color: var(--text-color-muted);
    --card-title-color: var(--text-color-base);

    --glass-bg-primary-raw: 255, 255, 255;
    --glass-border-raw: 255, 255, 255;
}

.mat-mdc-form-field {
    width: 100%;

    .mdc-notched-outline>* {
        border-color: rgba(255, 255, 255, 0.4) !important;
    }

    &.mat-focused .mdc-notched-outline>* {
        border-color: rgba(255, 255, 255, 0.8) !important;
        border-width: 2px;
    }

    .mdc-floating-label,
    .mat-mdc-select-arrow svg,
    .mat-datepicker-toggle .mat-icon {
        color: rgba(255, 255, 255, 0.7) !important;
    }

    &.mat-focused .mdc-floating-label {
        color: #ffffff !important;
    }

    .mat-mdc-input-element {
        color: #ffffff !important;
    }
}

.mat-mdc-radio-group {
    color: rgba(255, 255, 255, 0.9);
}

.mat-mdc-radio-button .mdc-radio__outer-circle {
    border-color: rgba(255, 255, 255, 0.7) !important;
}

.mat-mdc-radio-button.mat-accent.mat-mdc-radio-checked .mdc-radio__inner-circle {
    background-color: #ffffff !important;
}

.mat-mdc-radio-button.mat-accent .mdc-radio__ripple::before {
    background-color: rgba(255, 255, 255, 0.2) !important;
}

@mixin glass-button-base($bg-color: var(--glass-bg-secondary),
    $border-color: var(--glass-border),
    $text-color: var(--button-text-color),
    $blur: var(--glass-blur)) {
    background: $bg-color;
    backdrop-filter: blur($blur);
    -webkit-backdrop-filter: blur($blur);
    border: var(--glass-border);
    box-shadow: var(--glass-shadow);
    color: $text-color !important;
    border-radius: var(--glass-border-radius) !important;
    padding: 0.6rem 1.2rem !important;
    transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease, border-color 0.3s ease;
    line-height: normal !important;
    overflow: hidden;
    display: inline-flex !important;
    align-items: center;
    justify-content: center;

    &:hover:not(:disabled) {
        background: var(--glass-bg-hover);
        border-color: var(--glass-border-hover);
        transform: translateY(-1px);
        box-shadow: var(--glass-shadow-hover);
    }

    &:active:not(:disabled) {
        transform: translateY(0);
        box-shadow: var(--glass-shadow);
    }

    &.mdc-button--disabled,
    &[disabled] {
        background: rgba(var(--glass-bg-primary-raw, 255, 255, 255), 0.05) !important;
        border-color: rgba(var(--glass-border-raw, 255, 255, 255), 0.1) !important;
        color: var(--text-color-muted) !important;
        box-shadow: none !important;
        backdrop-filter: blur(5px) !important;
        -webkit-backdrop-filter: blur(5px) !important;
        cursor: not-allowed !important;
        transform: none !important;
    }
}

.mat-mdc-raised-button {
    &:not([color]) {
        @include glass-button-base();
    }

    &.mat-primary {
        @include glass-button-base($bg-color: rgba(var(--primary-color-rgb), 0.4),
            $border-color: rgba(var(--primary-color-rgb), 0.6),
            $text-color: var(--button-text-color-on-primary),
        );

        &:hover:not(:disabled) {
            background: rgba(var(--primary-color-rgb), 0.5);
            border-color: rgba(var(--primary-color-rgb), 0.7);
        }

        &.mdc-button--disabled,
        &[disabled] {
            background: rgba(var(--primary-color-rgb), 0.1) !important;
            border-color: rgba(var(--primary-color-rgb), 0.2) !important;
            color: var(--text-color-muted) !important;
        }
    }

    // Add styles for .mat-accent, .mat-warn
}

.mat-mdc-flat-button {
    &:not([color]) {
        @include glass-button-base();
    }

    &.mat-primary {
        @include glass-button-base(rgba(var(--primary-color-rgb), 0.4), rgba(var(--primary-color-rgb), 0.6), var(--button-text-color-on-primary));

        &:hover:not(:disabled) {
            background: rgba(var(--primary-color-rgb), 0.5);
            border-color: rgba(var(--primary-color-rgb), 0.7);
        }

        &.mdc-button--disabled,
        &[disabled] {
            background: rgba(var(--primary-color-rgb), 0.1) !important;
            border-color: rgba(var(--primary-color-rgb), 0.2) !important;
            color: var(--text-color-muted) !important;
        }
    }

    // Add .mat-accent, .mat-warn
}

.mat-mdc-stroked-button {
    @include glass-button-base($bg-color: transparent,
        $border-color: var(--glass-border),
        $text-color: var(--text-color-base),
        $blur: 5px);
    box-shadow: none !important;

    &:hover:not(:disabled) {
        background: var(--glass-bg-primary);
        border-color: var(--glass-border-hover);
        transform: translateY(-1px);
    }

    &.mat-primary {
        border-color: rgba(var(--primary-color-rgb), 0.6) !important;
        color: var(--primary-color) !important;

        &:hover:not(:disabled) {
            background: rgba(var(--primary-color-rgb), 0.1) !important;
            border-color: rgba(var(--primary-color-rgb), 0.8) !important;
        }

        &.mdc-button--disabled,
        &[disabled] {
            background: transparent !important;
            border-color: rgba(var(--primary-color-rgb), 0.2) !important;
            color: rgba(var(--primary-color-rgb), 0.4) !important;
        }
    }

    // Add .mat-accent, .mat-warn
}

.mat-mdc-card {
    background: var(--card-bg) !important;
    backdrop-filter: blur(var(--glass-blur)) !important;
    -webkit-backdrop-filter: blur(var(--glass-blur)) !important;
    border: var(--card-border) !important;
    box-shadow: var(--card-shadow) !important;
    border-radius: var(--glass-border-radius) !important;
    color: var(--card-text-color) !important;

    .mat-mdc-card-title,
    .mat-mdc-card-subtitle,
    .mat-mdc-card-content {
        color: inherit;
    }

    .mat-mdc-card-title {
        color: var(--card-title-color) !important;
        font-weight: 600;
    }

    .mat-mdc-card-subtitle {
        color: var(--card-subtitle-color) !important;
    }

    --mdc-elevated-card-container-elevation: none !important;
    box-shadow: var(--card-shadow) !important;
}


.mat-mdc-button {
    background: transparent;
    border: 1px solid transparent;
    color: var(--text-color-base) !important;
    border-radius: var(--glass-border-radius) !important;
    padding: 0.6rem 1.2rem !important;
    transition: background 0.3s ease, border-color 0.3s ease, color 0.3s ease;
    display: inline-flex !important;
    align-items: center;
    justify-content: center;
    line-height: normal !important;
    overflow: hidden;


    &:hover:not(:disabled) {
        background: var(--glass-bg-primary);
        border-color: var(--glass-border);
        color: var(--text-color-inverted) !important;
        backdrop-filter: blur(var(--glass-blur));
        -webkit-backdrop-filter: blur(var(--glass-blur));
    }

    &.mat-primary {
        color: var(--primary-color) !important;

        &:hover:not(:disabled) {
            background: rgba(var(--primary-color-rgb), 0.1);
            border-color: transparent;
            color: var(--primary-color) !important;
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
        }

        &.mdc-button--disabled,
        &[disabled] {
            background: transparent !important;
            border-color: transparent !important;
            color: rgba(var(--primary-color-rgb), 0.4) !important;
        }
    }

    // Add .mat-accent, .mat-warn
}

.mat-mdc-icon-button {
    background: transparent;
    border: 1px solid transparent;
    color: var(--icon-color-default) !important;
    border-radius: var(--glass-border-radius) !important;
    transition: background 0.3s ease, border-color 0.3s ease, color 0.3s ease;
    width: 40px !important;
    height: 40px !important;
    padding: 0 !important;
    display: inline-flex !important;
    align-items: center;
    justify-content: center;
    overflow: hidden;


    &:hover:not(:disabled) {
        background: var(--glass-bg-primary);
        border-color: var(--glass-border);
        color: var(--icon-color-hover) !important;
        backdrop-filter: blur(var(--glass-blur));
        -webkit-backdrop-filter: blur(var(--glass-blur));
    }

    &.mat-primary {
        color: var(--primary-color) !important;

        &:hover:not(:disabled) {
            background: rgba(var(--primary-color-rgb), 0.1);
            border-color: transparent;
            color: var(--primary-color) !important;
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
        }

        &.mdc-button--disabled,
        &[disabled] {
            background: transparent !important;
            border-color: transparent !important;
            color: rgba(var(--primary-color-rgb), 0.4) !important;
        }
    }

    // Add .mat-accent, .mat-warn
}

.mat-mdc-button-persistent-ripple::before,
.mat-mdc-button .mat-mdc-button-ripple .mat-ripple-element,
.mat-mdc-icon-button .mat-mdc-button-ripple .mat-ripple-element {
    background-color: rgba(255, 255, 255, 0.2) !important;
}

.mat-mdc-raised-button.mat-primary .mat-mdc-button-ripple .mat-ripple-element,
.mat-mdc-flat-button.mat-primary .mat-mdc-button-ripple .mat-ripple-element,
.mat-mdc-icon-button.mat-primary .mat-mdc-button-ripple .mat-ripple-element {
    background-color: rgba(255, 255, 255, 0.3) !important;
}

.mat-mdc-stroked-button.mat-primary .mat-mdc-button-ripple .mat-ripple-element {
    background-color: rgba(102, 126, 234, 0.2) !important;
}

// *** DARK MODE OVERRIDES ***
[data-theme="dark"] {
    --glass-bg-primary: rgba(30, 30, 40, 0.6);
    --glass-bg-secondary: rgba(50, 50, 60, 0.4);
    --glass-border: 1px solid rgba(255, 255, 255, 0.1);

    --text-color-primary: #ffffff;
    --text-color-secondary: #cccccc;
    --text-color-muted: #888888;
}

.mat-mdc-menu-panel {
    border-radius: 12px !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    background-color: rgba(240, 245, 250, 0.5) !important;
    max-height: 600px !important;
    min-width: 300px !important;
    backdrop-filter: blur(18px) !important;
    -webkit-backdrop-filter: blur(18px) !important;
    box-shadow: 0 0 clamp(10px, 2vw, 20px) rgba(0, 0, 0, 0.3) !important;

    --mdc-elevation-overlay-opacity: 0;

    .mat-mdc-menu-content {
        padding: 12px !important;
        background: transparent !important;
    }

    .mat-mdc-menu-item {
        &:hover {
            background-color: var(--sidebar-mat-menu-option-hover-bg) !important;
            border-radius: 8px;
            transition: all 0.2s ease;
        }
    }

    .mdc-list-item {
        &:hover {
            background-color: var(--sidebar-mat-menu-option-hover-bg) !important;
            border-radius: 8px;
            transition: all 0.2s ease;
        }
    }
}

:root {
    // status colors
    --color-success: #4CAF50;
    --color-warning: #FF9800;
    --color-error: #F44336;
    --color-info: #2196F3;

    // TODO: Decide which colors can represent authentic pages style
    // brand colors
    --color-primary: rgb(178, 66, 201);
    --color-primary-light: rgb(255, 0, 255);
    --color-primary-dark: rgb(148, 28, 172);
    --color-secondary: #6c757d;
    --color-accent: #e91e63;
}

:host ::ng-deep,
body {
    .mat-mdc-form-field {
        width: 100%;
    }

    .mat-mdc-form-field .mdc-notched-outline>* {
        border-color: rgba(255, 255, 255, 0.4) !important;
    }

    body.dark-theme .mat-mdc-form-field .mdc-notched-outline>* {
        border-color: rgba(255, 255, 255, 0.3) !important;
    }

    .mat-mdc-form-field.mat-focused .mdc-notched-outline>* {
        border-color: rgba(255, 255, 255, 0.8) !important;
        border-width: 2px;
    }

    body.dark-theme .mat-mdc-form-field.mat-focused .mdc-notched-outline>* {
        border-color: rgba(255, 255, 255, 0.7) !important;
    }

    .mat-mdc-form-field .mdc-floating-label,
    .mat-mdc-select-arrow svg,
    .mat-datepicker-toggle .mat-icon {
        color: rgba(255, 255, 255, 0.7) !important;
    }

    body.dark-theme .mat-mdc-form-field .mdc-floating-label,
    body.dark-theme .mat-mdc-select-arrow svg,
    body.dark-theme .mat-datepicker-toggle .mat-icon {
        color: rgba(255, 255, 255, 0.6) !important;
    }

    .mat-mdc-form-field.mat-focused .mdc-floating-label {
        color: #ffffff !important;
    }

    body.dark-theme .mat-mdc-form-field.mat-focused .mdc-floating-label {
        color: #eeeeee !important;
    }

    .mat-mdc-input-element,
    .mat-mdc-select-value {
        color: #ffffff !important;
    }

    body.dark-theme .mat-mdc-input-element,
    body.dark-theme .mat-mdc-select-value {
        color: #eeeeee !important;
    }

    .mat-mdc-form-field-error {
        color: #ffcccc !important;
        font-size: 0.8rem;
    }

    body.dark-theme .mat-mdc-form-field-error {
        color: #ff8a80 !important;
    }

    /* Radio buttons */
    .mat-mdc-radio-group {
        color: rgba(255, 255, 255, 0.9);
    }

    body.dark-theme .mat-mdc-radio-group {
        color: rgba(255, 255, 255, 0.9);
    }

    .mat-mdc-radio-button .mdc-radio__outer-circle {
        border-color: rgba(255, 255, 255, 0.7) !important;
    }

    body.dark-theme .mat-mdc-radio-button .mdc-radio__outer-circle {
        border-color: rgba(255, 255, 255, 0.6) !important;
    }

    .mat-mdc-radio-button.mat-accent.mat-mdc-radio-checked .mdc-radio__inner-circle {
        background-color: #ffffff !important;
    }

    .mat-mdc-radio-button.mat-accent .mdc-radio__ripple::before {
        background-color: rgba(255, 255, 255, 0.2) !important;
    }

    body.dark-theme .mat-mdc-radio-button.mat-accent .mdc-radio__ripple::before {
        background-color: rgba(255, 255, 255, 0.15) !important;
    }

    /* Dropdown panels */
    .mat-mdc-select-panel,
    .mat-mdc-autocomplete-panel {
        background: rgba(50, 50, 70, 0.8) !important;
        backdrop-filter: blur(10px) !important;
        -webkit-backdrop-filter: blur(10px) !important;
    }

    body.dark-theme .mat-mdc-select-panel,
    body.dark-theme .mat-mdc-autocomplete-panel {
        background: rgba(30, 30, 45, 0.8) !important;
    }

    .mat-mdc-option {
        color: rgba(255, 255, 255, 0.8) !important;
    }

    body.dark-theme .mat-mdc-option {
        color: rgba(255, 255, 255, 0.8) !important;
    }

    .mat-mdc-option.mdc-list-item--selected,
    .mat-mdc-option:hover {
        background: rgba(255, 255, 255, 0.1) !important;
        color: #ffffff !important;
    }

    body.dark-theme .mat-mdc-option.mdc-list-item--selected,
    body.dark-theme .mat-mdc-option:hover {
        background: rgba(255, 255, 255, 0.08) !important;
        color: #ffffff !important;
    }

    /* Datepicker Panel */
    .mat-datepicker-content .mat-calendar {
        background-color: rgba(50, 50, 70, 0.9) !important;
        color: white !important;
    }

    body.dark-theme .mat-datepicker-content .mat-calendar {
        background-color: rgba(40, 40, 55, 0.95) !important;
        color: var(--text-color-base) !important;
    }

    .mat-datepicker-content .mat-calendar-body-cell-content {
        color: white !important;
        border-color: rgba(255, 255, 255, 0.5) !important;
    }

    body.dark-theme .mat-datepicker-content .mat-calendar-body-cell-content {
        color: var(--text-color-base) !important;
        border-color: rgba(255, 255, 255, 0.2) !important;
    }

    .mat-datepicker-content .mat-calendar-body-today {
        border-color: rgba(255, 255, 255, 0.8) !important;
    }

    body.dark-theme .mat-datepicker-content .mat-calendar-body-today {
        border-color: rgba(255, 255, 255, 0.5) !important;
    }

    .mat-datepicker-content .mat-calendar-body-selected {
        background-color: rgba(102, 126, 234, 0.8) !important;
        color: white !important;
    }

    body.dark-theme .mat-datepicker-content .mat-calendar-body-selected {
        background-color: rgba(var(--primary-color-rgb), 0.7) !important;
        color: white !important;
    }

    .mat-datepicker-content .mat-calendar-arrow {
        border-top-color: white !important;
    }

    body.dark-theme .mat-datepicker-content .mat-calendar-arrow {
        border-top-color: var(--text-color-base) !important;
    }

    .mat-datepicker-content .mat-calendar-period-button,
    .mat-datepicker-content .mat-calendar-previous-button,
    .mat-datepicker-content .mat-calendar-next-button {
        color: rgba(255, 255, 255, 0.8) !important;
    }

    body.dark-theme .mat-datepicker-content .mat-calendar-period-button,
    body.dark-theme .mat-datepicker-content .mat-calendar-previous-button,
    body.dark-theme .mat-datepicker-content .mat-calendar-next-button {
        color: var(--text-color-muted) !important;
    }
}