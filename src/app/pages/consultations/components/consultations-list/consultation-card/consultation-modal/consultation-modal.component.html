<div class="modal-overlay" 
     *ngIf="isOpen"
     [class.modal-open]="isOpen" 
     (click)="onOverlayClick()">
     
  <div class="modal-container" (click)="onModalClick($event)">
    <div class="modal-header">
      <h3 class="modal-title">Book Consultation</h3>
      <button type="button" 
              class="modal-close-btn"
              (click)="onClose()">
        âœ•
      </button>
    </div>
  
    <div class="modal-body">
      <div class="consultation-info" *ngIf="model">
        <h4>{{ model.title }}</h4>
        <div class="coach-info" *ngIf="model.coach">
          <span class="coach-name">{{ coachFullName }}</span>
          <span class="coach-position">{{ model.coach.position }}</span>
        </div>
        <div class="consultation-meta">
          <span *ngIf="model.duration">Duration: {{ model.duration }}</span>
          <span *ngIf="model.price">Price: {{ model.price }}</span>
        </div>
      </div>

      <form [formGroup]="consultationForm" (ngSubmit)="onSubmit()" *ngIf="consultationForm">
        <div class="form-group">
          <label for="email">Email *</label>
          <input type="email" 
                 id="email"
                 formControlName="email"
                 placeholder="your@email.com">
          <div class="error" *ngIf="isFieldInvalid('email')">
            {{ getFieldError('email') }}
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="date">Date *</label>
            <input type="date" 
                   id="date"
                   formControlName="date">
            <div class="error" *ngIf="isFieldInvalid('date')">
              Date is required
            </div>
          </div>

          <div class="form-group">
            <label for="time">Time *</label>
            <input type="time" 
                   id="time"
                   formControlName="time">
            <div class="error" *ngIf="isFieldInvalid('time')">
              Time is required
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="phone">Phone</label>
          <input type="tel" 
                 id="phone"
                 formControlName="phone"
                 placeholder="+1 (555) 123-4567">
        </div>

        <div class="form-group">
          <label for="message">Message</label>
          <textarea id="message"
                    formControlName="message"
                    rows="3"
                    placeholder="Tell us about your goals..."></textarea>
        </div>

        <div class="form-actions">
          <button type="button" 
                  class="btn btn-secondary" 
                  (click)="onClose()"
                  [disabled]="isLoading">
            Cancel
          </button>
          <button type="submit" 
                  class="btn btn-primary"
                  [disabled]="consultationForm.invalid || isLoading">
            <span *ngIf="isLoading">Loading...</span>
            <span>Book Consultation</span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>